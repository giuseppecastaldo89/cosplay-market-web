<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosplay Market - Mobile</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- SWITCH LINGUA FISSO -->
    <div class="lang-switch-fixed">
        <button onclick="switchLang('it')">ðŸ‡®ðŸ‡¹ IT</button>
        <button onclick="switchLang('en')">ðŸ‡¬ðŸ‡§ EN</button>
    </div>

    <!-- LOGO -->
    <div class="logo">
        <img src="logo.png" alt="Il mio logo">
    </div>

    <!-- NAVIGAZIONE -->
    <nav>
        <ul>
            <li><a href="#" class="nav-link active" data-target="home">Home</a></li>
            <li><a href="#" class="nav-link" data-target="privacy">Privacy e Policy</a></li>
            <li><a href="#" class="nav-link" data-target="contatti">Contatti</a></li>
        </ul>
    </nav>

    <!-- CONTENUTO DINAMICO -->
    <div class="content">
        <!-- Qui viene caricata la pagina selezionata -->
    </div>

    <!-- SCRIPT -->
    <script>
        let currentLang = 'it';
        const navLinks = document.querySelectorAll(".nav-link");
        const contentDiv = document.querySelector(".content"); // dove caricare le pagine
const langButtons = document.querySelectorAll('.lang-switch-fixed button');

                // Funzione per aggiornare il bottone attivo
function updateLangButtons() {
    langButtons.forEach(btn => btn.classList.remove('active'));
    const btn = document.querySelector(`.lang-switch-fixed button[onclick="switchLang('${currentLang}')"]`);
    if (btn) btn.classList.add('active');
}
        // Carica la prima pagina di default (home)
        loadPage('home');
        updateLangButtons(); // inizializza il bottone attivo

        navLinks.forEach(link => {
            link.addEventListener("click", e => {
                e.preventDefault();
                const page = link.dataset.target;

                // Aggiorna link attivo
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');

                // Carica pagina selezionata
                loadPage(page);
            });
        });

        function loadPage(page) {
            fetch(`${page}.html`)
                .then(res => res.text())
                .then(html => {
                    contentDiv.innerHTML = html;
                    showLang(currentLang, page); // passiamo page
                })
                .catch(() => {
                    contentDiv.innerHTML = "<p>Errore nel caricamento della pagina.</p>";
                });
        }

        function switchLang(lang) {
            currentLang = lang;
            const page = document.querySelector('.nav-link.active').dataset.target;
            showLang(lang, page);
            updateLangButtons(); // aggiorna classe active sul bottone
        }

        function showLang(lang, page) {
            contentDiv.querySelectorAll('.lang-section').forEach(s => s.classList.remove('active'));
            const target = contentDiv.querySelector(`#${page}-${lang}`);
            if (target) target.classList.add('active');
        }

    </script>
</body>

</html>